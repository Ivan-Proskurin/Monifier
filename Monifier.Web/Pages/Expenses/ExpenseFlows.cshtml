@page
@using Common.Extensions
@model Expenses.ExpenseFlowsModel

@{
    ViewBag.Title = "Расходы";
    var flows = Model.ExpenseFlows;
}

<h4 class="form-caption-xs">Категории расходов</h4>
<table class="cashed-table table table-striped table-hover">
    <thead class="thead-dark">
    <tr>
        <th width="30%">
            Номер
        </th>
        <th width="50%">
            Название
        </th>
        <th width="50%" class="money-cell">
            Баланс
        </th>
        <th width="10%></th>
    </tr>
    </thead>
    <tbody id="cat-table-body">
        
    @for (var i = 0; i < flows.Count; i++)
    {
        var flow = flows[i];
        var rowClass = flow.Balance >= 0 ? "table-default" : "table-danger";
        var moneyRowClass = "money-cell " + rowClass;
        
        <tr class="@rowClass">
            <td>@flow.Number</td>
            <td>
                <a asp-page="./EditExpenseFlow" asp-route-id="@flow.Id" class="edit-item-link">@flow.Name</a>
            </td>
            <td class="money-cell">
                @flow.Balance.ToMoney()
            </td>
            <td>
                <div class="dropdown show">
                    <a class="btn btn-secondary btn-sm dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Действия
                    </a>

                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink">
                        <a asp-page="./AddExpense" asp-route-expenseId="@flow.Id" class="dropdown-item btn btn-outline-secondary btn-sm">Добавить расход</a>
                        <a asp-page="./AddExpenseBill" asp-route-expenseId="@flow.Id" class="dropdown-item btn btn-outline-secondary btn-sm">Ввести чек</a>
                        <a asp-page="./FlowTransfer" asp-route-expenseId="@flow.Id" class="dropdown-item btn btn-outline-secondary btn-sm">Перевод со счета</a>
                    </div>
                </div>
            </td>
        </tr>
    }

    </tbody>
</table>

<!-- Adding flow -->
<div class="bottom-buttons-row">
    <a asp-page="./CreateExpenseFlow" class="btn btn-outline-danger cursor-pointer">Добавить категорию</a>
    <a asp-page="./ExpensesTable" class="btn btn-outline-info cursor-pointer">Посмотреть расходы</a>
</div>

@section Scripts {
    <script type="text/javascript">
        activateLink("#expensesLink");
    </script>
}